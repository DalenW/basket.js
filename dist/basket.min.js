/*!
* <%= pkg.name %>
* v<%= pkg.version %> - <%= grunt.template.today("yyyy-mm-dd") %>
<%= pkg.homepage ? "* " + pkg.homepage + "\n" : "" %>* (c) <%= pkg.author.name %>; <%= _.pluck(pkg.licenses, "type").join(", ") %> License
* Created by: <%= _.pluck(pkg.maintainers, "name").join(", ") %>
* Contributors: <%= _.pluck(pkg.contributors, "name").join(", ") %>
* Uses rsvp.js, https://github.com/tildeio/rsvp.js
*/
!function(e,n){"use strict";const r=n.head||n.getElementsByTagName("head")[0];var u="basket-";let a=5e3,i=[],o=!1,c="";const s=function(n,r){try{return localStorage.setItem(u+n,JSON.stringify(r)),!0}catch(e){if(0<=e.name.toUpperCase().indexOf("QUOTA")){let e,t=[];for(e in localStorage)0===e.indexOf(u)&&t.push(JSON.parse(localStorage[e]));return t.length?(t.sort(function(e,t){return e.stamp-t.stamp}),basket.remove(t[0].key),s(n,r)):void 0}return}};function l(r){return u=r.url,new RSVP.Promise(function(e,t){const n=new XMLHttpRequest;n.open("GET",u),n.onreadystatechange=function(){4===n.readyState&&(200===n.status||0===n.status&&n.responseText?e({content:n.responseText,type:n.getResponseHeader("content-type")}):t(new Error(n.statusText)))},setTimeout(function(){n.readyState<4&&n.abort()},basket.timeout),n.send()}).then(function(e){var t,n,t=(t=r,n=e,e=+new Date,t.data=n.content,t.originalType=n.type,t.type=t.type||n.type,t.skipCache=t.skipCache||!1,t.skipCDNCache=t.skipCDNCache||o,t.stamp=e,t.expire=e+60*(t.expire||a)*60*1e3,t);return r.skipCache||s(r.key,t),t});var u}function p(e){let t,n,r;var u,a;if(e.url)return e.key=e.key||e.url,e.skipCDNCache&&(""===c?e.url=e.url+"?_="+Math.random().toString(36).substr(2,5):e.url=e.url+"?_="+c),t=basket.get(e.key),e.execute=!1!==e.execute,r=(u=t,a=e,!u||u.expire-+new Date<0||a.unique!==u.unique||basket.isValidItem&&!basket.isValidItem(u,a)),e.live||r?(e.unique&&(e.url+=(0<e.url.indexOf("?")?"&":"?")+"basket-unique="+e.unique),n=l(e),e.live&&!r&&(n=n.then(function(e){return e},function(){return t}))):(t.type=e.type||t.originalType,t.execute=e.execute,n=new RSVP.Promise(function(e){e(t)})),n}const f={default:function(e){const t=n.createElement("script");t.defer=!0,t.text=e.data,r.appendChild(t)}};function h(e){return e.map(function(e){var t;return e.execute&&((t=e).type&&f[t.type]?f[t.type](t):f.default(t)),e})}function d(){let e,t,n=[];for(e=0,t=arguments.length;e<t;e++)n.push(p(arguments[e]));return RSVP.all(n)}const y=function(){var e=d.apply(null,arguments);const t=this.then(function(){return e}).then(h);return t.thenRequire=y,t};e.basket={require:function(){for(var e=0,t=arguments.length;e<t;e++)arguments[e].execute=!1!==arguments[e].execute,arguments[e].once&&0<=i.indexOf(arguments[e].url)?arguments[e].execute=!1:!1!==arguments[e].execute&&i.indexOf(arguments[e].url)<0&&i.push(arguments[e].url);const n=d.apply(null,arguments).then(h);return n.thenRequire=y,n},remove:function(e){return localStorage.removeItem(u+e),this},get:function(e){var t=localStorage.getItem(u+e);try{return JSON.parse(t||"false")}catch(e){return!1}},clear:function(e){let t,n;var r=+new Date;for(t in localStorage)n=t.split(u)[1],n&&(!e||this.get(n).expire<=r)&&this.remove(n);return this},isValidItem:null,timeout:5e3,addHandler:function(e,t){(e=!Array.isArray(e)?[e]:e).forEach(function(e){f[e]=t})},removeHandler:function(e){basket.addHandler(e,void 0)},setDefaultExpiration:function(e){e=parseInt(e);return 1<=e?(a=e,!0):(console.log("Incorrect default expiration hours set."),!1)},getDefaultExpiration:function(){return a},setSkipCDNCache:function(e){return o=!0===e,o},setCacheInstance:function(e){return c=e,c},getCacheInstance:function(){return c}},basket.clear(!0)}(this,document);
//# sourceMappingURL=basket.min.js.map